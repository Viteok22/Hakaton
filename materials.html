<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Учебные материалы - УмКабинет</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="components/navbar.js"></script>
    <script src="components/footer.js"></script>
    <script src="components/sidebar.js"></script>
</head>
<body class="bg-gray-50">
    <custom-navbar></custom-navbar>
    <div class="flex">
        <custom-sidebar></custom-sidebar>

        <main class="flex-1 p-8">
            <div class="max-w-5xl mx-auto bg-white rounded-xl shadow-lg p-6">
                <div class="flex justify-between items-center mb-8">
                    <h1 class="text-3xl font-bold text-indigo-800">Учебные материалы</h1>
                    <button id="toggleFormBtn" class="bg-indigo-600 text-white px-4 py-2 rounded-lg flex items-center hover:bg-indigo-700 transition">
                        <i data-feather="book-open" class="mr-2"></i> Открыть поиск
                    </button>
                </div>

                <!-- Форма поиска -->
                <div id="searchForm" class="hidden mb-8 border border-indigo-100 rounded-lg p-6 bg-indigo-50">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                        <div>
                            <label for="discipline" class="block text-sm font-medium text-gray-700 mb-1">Дисциплина</label>
                            <select id="discipline" class="w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                                <option value="">Выберите дисциплину</option>
                                <option value="алгебра и геометрия">Алгебра и геометрия</option>
                                <option value="математический анализ">Математический анализ</option>
                                <option value="дискретная математика">Дискретная математика</option>
                            </select>
                        </div>
                        <div>
                            <label for="course" class="block text-sm font-medium text-gray-700 mb-1">Курс</label>
                            <input id="course" type="number" min="1" max="5" placeholder="1" class="w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                        </div>
                        <div>
                            <label for="group" class="block text-sm font-medium text-gray-700 mb-1">Группа</label>
                            <select id="group" class="w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                                <option value="">Выберите группу</option>
                                <option value="топ-101б">ТОП-101Б</option>
                                <option value="топ-102б">ТОП-102Б</option>
                                <option value="топ-103б">ТОП-103Б</option>
                                <option value="топ-104б">ТОП-104Б</option>
                            </select>
                        </div>
                        <div>
                            <label for="lecture" class="block text-sm font-medium text-gray-700 mb-1">№ Лекции</label>
                            <input id="lecture" type="number" min="1" placeholder="1" class="w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                        </div>
                    </div>
                    <div class="mt-6 flex justify-end">
                        <button id="searchBtn" class="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition">
                            <i data-feather="search" class="inline mr-2"></i> Найти
                        </button>
                    </div>
                </div>

                <!-- Результаты поиска -->
                <div id="results" class="mt-6 hidden">
                    <h2 class="text-2xl font-semibold text-indigo-800 mb-4">Результаты поиска</h2>

                    <div id="materialsList" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- Здесь появятся найденные материалы -->
                    </div>
                </div>

                <!-- Если ничего не найдено -->
                <div id="noResults" class="hidden text-center text-gray-500 mt-10">
                    <i data-feather="file-text" class="w-10 h-10 mx-auto mb-2"></i>
                    <p>Учебных материалов не найдено</p>
                </div>
            </div>
        </main>
    </div>

    <custom-footer></custom-footer>

    <script>
        feather.replace();

        // показать/скрыть форму поиска
        document.getElementById('toggleFormBtn').addEventListener('click', () => {
            document.getElementById('searchForm').classList.toggle('hidden');
        });

        // база данных учебных материалов (пока 1 пример)
        const materials = [
            {
                discipline: 'математический анализ',
                course: '1',
                group: 'топ-103б',
                lecture: '1',
                title: 'Математический анализ — Лекция 1',
                description: 'Введение в математический анализ. Пределы последовательностей, основные определения и примеры.',
                lectureFile: 'materials/matan_lecture1.pdf',
                notesFile: 'materials/matan_notes1.pdf'
            }
        ];

        // поиск
        document.getElementById('searchBtn').addEventListener('click', () => {
            const discipline = document.getElementById('discipline').value.trim().toLowerCase();
            const course = document.getElementById('course').value.trim().toLowerCase();
            const group = document.getElementById('group').value.trim().toLowerCase();
            const lecture = document.getElementById('lecture').value.trim().toLowerCase();

            const resultsContainer = document.getElementById('materialsList');
            resultsContainer.innerHTML = '';

            const found = materials.filter(m =>
                m.discipline === discipline &&
                m.course === course &&
                m.group === group &&
                m.lecture === lecture
            );

            document.getElementById('results').classList.remove('hidden');
            document.getElementById('noResults').classList.add('hidden');

            if (found.length === 0) {
                document.getElementById('noResults').classList.remove('hidden');
                document.getElementById('results').classList.add('hidden');
                return;
            }

            found.forEach(m => {
                const card = document.createElement('div');
                card.className = 'bg-white border border-indigo-100 rounded-lg p-4 shadow-sm hover:shadow-md transition';
                card.innerHTML = `
                    <h3 class="text-lg font-medium text-indigo-800 mb-2">${m.title}</h3>
                    <p class="text-sm text-gray-600 mb-4">${m.description}</p>
                    <div class="flex flex-col space-y-2">
                        <a href="${m.lectureFile}" target="_blank" class="bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-indigo-700 transition inline-flex items-center justify-center">
                            <i data-feather="book-open" class="mr-2"></i> Открыть лекцию (PDF)
                        </a>
                        <a href="${m.notesFile}" target="_blank" class="bg-green-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-green-700 transition inline-flex items-center justify-center">
                            <i data-feather="file-text" class="mr-2"></i> Открыть конспект (PDF)
                        </a>
                    </div>
                `;
                resultsContainer.appendChild(card);
            });

            feather.replace();
        });
    </script>
</body>
</html>
